<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŠ¸ìœ„í„° 2ì°¨ ì§€ì¸ í™•ì¸ ì„œë¹„ìŠ¤</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f8fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            text-align: center;
            max-width: 500px;
            width: 90%;
        }
        h1 { color: #1da1f2; font-size: 1.8rem; margin-bottom: 10px; }
        p { color: #657786; line-height: 1.6; margin-bottom: 30px; }
        
        /* ë¶ë§ˆí¬ë¦¿ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .bookmarklet-btn {
            display: inline-block;
            background-color: #1da1f2;
            color: white;
            padding: 18px 32px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(29, 161, 242, 0.3);
            cursor: grab;
            transition: transform 0.2s, background-color 0.2s;
        }
        .bookmarklet-btn:hover {
            background-color: #1a91da;
            transform: translateY(-2px);
        }
        .bookmarklet-btn:active { cursor: grabbing; }

        .guide-box {
            margin-top: 40px;
            text-align: left;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            font-size: 0.9rem;
        }
        .guide-box h3 { margin-top: 0; font-size: 1rem; color: #14171a; }
        ol { padding-left: 20px; color: #657786; }
        li { margin-bottom: 8px; }
        .highlight { color: #1da1f2; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ” ì§€ì¸ ëŒ€ì¡°ê¸°</h1>
        <p>3ëª…ì˜ íƒ€ê²Ÿ ìœ ì €ì™€ ë‹¹ì‹  ì‚¬ì´ì˜<br>ê³µí†µ ì§€ì¸ì„ ë²„íŠ¼ í•˜ë‚˜ë¡œ ì°¾ì•„ë³´ì„¸ìš”.</p>

        <a id="bookmarklet" class="bookmarklet-btn" href="#">ë²„íŠ¼ì„ ë¶ë§ˆí¬ë°”ë¡œ ë“œë˜ê·¸</a>

        <div class="guide-box">
            <h3>ì‚¬ìš© ë°©ë²•</h3>
            <ol>
                <li>ìœ„ íŒŒë€ ë²„íŠ¼ì„ ë§ˆìš°ìŠ¤ë¡œ ì¡ì•„ <span class="highlight">ë¶ë§ˆí¬ë°”(ì¦ê²¨ì°¾ê¸° ëª©ë¡)</span>ë¡œ ë“œë˜ê·¸í•©ë‹ˆë‹¤.</li>
                <li>í™•ì¸í•˜ê³  ì‹¶ì€ <span class="highlight">íŠ¸ìœ„í„° íŒ”ë¡œì‰ ëª©ë¡</span> í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</li>
                <li>ëª©ë¡ì„ ì•„ë˜ë¡œ <span class="highlight">ì¶©ë¶„íˆ ìŠ¤í¬ë¡¤</span>í•œ ë’¤, ì €ì¥í•œ ë¶ë§ˆí¬ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</li>
            </ol>
        </div>
    </div>

    <script>
        /**
         * 1. ë‹˜ì˜ ì‹¤ì œ GitHub Pages ì£¼ì†Œ ì„¤ì •
         * ì‚¬ìš©ìë‹˜ì´ ì£¼ì‹  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì„¸íŒ…ë˜ì—ˆìŠµë‹ˆë‹¤.
         */
        const resultPageUrl = "https://letsSealtime.github.io/followercheck/result.html";

        /**
         * 2. ë¶ë§ˆí¬ë¦¿ ì½”ë“œ ë³¸ì²´
         * SyntaxError ë°©ì§€ë¥¼ ìœ„í•´ í…œí”Œë¦¿ ë¦¬í„°ëŸ´ë¡œ ì‘ì„± í›„ ë²„íŠ¼ì— ì£¼ì…í•©ë‹ˆë‹¤.
         */
        const bookmarkletCode = `javascript:(function(){
            const cells = document.querySelectorAll('[data-testid="UserCell"]');
            const followingIds = [];
            cells.forEach(cell => {
                const link = cell.querySelector('a[href^="/"][role="link"]');
                if (link) {
                    const id = link.getAttribute('href').replace('/', '');
                    if (!['home', 'explore', 'notifications', 'messages', 'settings'].includes(id.toLowerCase())) {
                        followingIds.push(id);
                    }
                }
            });

            if (followingIds.length === 0) {
                alert('íŒ”ë¡œì‰ ëª©ë¡ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. íŠ¸ìœ„í„° íŒ”ë¡œì‰ í˜ì´ì§€ê°€ ë§ëŠ”ì§€ í™•ì¸í•˜ì‹œê³  ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ì£¼ì„¸ìš”!');
            } else {
                if(confirm(followingIds.length + 'ëª…ì˜ ì§€ì¸ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ëŒ€ì¡° í˜ì´ì§€ë¡œ ì´ë™í• ê¹Œìš”?')) {
                    location.href = '${resultPageUrl}?following=' + encodeURIComponent(followingIds.join(','));
                }
            }
        })();`.replace(/\s+/g, ' '); // ê³µë°± ì œê±°í•˜ì—¬ í•œ ì¤„ë¡œ ì••ì¶•

        // ë²„íŠ¼ì— ì½”ë“œ ì£¼ì…
        document.getElementById('bookmarklet').href = bookmarkletCode;
    </script>
</body>
</html>